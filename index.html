<!doctype html>
<html>
	<head>
		<title>DCC</title>
		<link rel="stylesheet" href="styles.css">
		<script type="text/javascript" src="jsmain.js"></script>
		<script type="text/javascript" src="script.js"></script>
	</head>

	<body>
		<h1 style="text-align: center;"> Defunctionalization with dependent types </h1>
		<table style="width: 95%; text-align: center; margin: auto;">
			<tr style="padding-bottom: 50px;">
				<td colspan=3> <h2> Source Language (CC) </h2>
				<td colspan=3> <h2> Target Language (DCC) </h2>
			</tr>
			<tr>
				<td rowspan=2> Context </td>
				<td rowspan=2><textarea id="cc_env"></textarea></td>
				<td rowspan=2><button onclick="cc_wf_button()"> Check context </button></td>

				<td> Label Context </td>
				<td><textarea id="dcc_lab_env"></textarea></td>
				<td><button onclick="dcc_wflb_button()"> Check label context </button></td>
			</tr>
			<tr>
				<td> Type Context </td>
				<td><textarea id="dcc_env"></textarea></td>
				<td><button onclick="dcc_wf_button()"> Check type context </button></td>
			</tr>
			<tr>
				<td> Term </td>
				<td><textarea id="cc_term"></textarea></td>
				<td>
					<button onclick="cc_infer_button()"> Infer type </button>
					<button onclick="cc_norm_button()"> Normalize </button>
					<button onclick="cc_back_button()" id="back_button1" style="display: none;"> Back </button>
					<button onclick="to_dcc()"> Transform to DCC </button>
				</td>
				<td> Term </td>
				<td><textarea id="dcc_term"></textarea></td>
				<td>
					<button onclick="dcc_infer_button()"> Infer type </button>
					<button onclick="dcc_norm_button()"> Normalize </button>
					<button onclick="dcc_back_button()" id="back_button2" style="display: none;"> Back </button>
					<button onclick="to_cc()"> Transform to CC </button>
				</td>
			</tr>
			<tr>
				<td> Type<br>(Output) </td>
				<td><textarea id="cc_type"></textarea></td>
				<td>
					<button onclick="cc_check_button()"> Type check </button>
					<button onclick="cc_clear()"> Clear </button>
				</td>

				<td> Type<br>(Output) </td>
				<td><textarea id="dcc_type"></textarea></td>
				<td>
					<button onclick="dcc_check_button()"> Type check </button>
					<button onclick="dcc_clear()"> Clear </button>
				</td>
			</tr>
		</table>

		<table style="width: 95%; text-align: center; margin: auto; table-layout: fixed;">
			<tr>
				<td colspan = 5> Examples </td>
			</tr>
			<tr>
				<td class="example" onclick="load_cc('', '\\A:U0. \\x:A. x', '')"> 
					Identity 
				</td>
				<td class="example" onclick="load_cc('', '(\\A:U0. \\x:A. x) Unit ()', '')"> 
					Identity application
				</td>
				<td class="example" onclick="load_cc('', '\\A:U0. \\B:(Pi x:A. U0). \\C:(Pi x:A. Pi y:B x. U0).\n\\f:(Pi x:A. Pi y:B x. C x y).\n\\g:(Pi x:A. B x).\n\\x:A. f x (g x)', '')"> 
					Composition 
				</td>
				<td class="example" onclick="load_cc('N:U0, z:N, suc:Pi x:N.N,\nFin:Pi x:N.U0, fzero:Fin (suc z), fsuc:Pi x:N. (Pi n:Fin x. Fin (suc x)),\nx:N, f:Fin (suc x)', '\\y:N.f', '')"> 
					Fin 
				</td>
				<td class="example" onclick="load_cc('N:U0, z:N, suc:Pi x:N.N,\nA:Pi f:(Pi x:N.N). U0,\na:Pi f:(Pi x:N.N). A (\\n:N.suc (f n))', 'a (\\x:N. suc x)', '')"> 
					New function in type  
				</td>
			</tr>
			<tr>
				<td class="example" onclick="load_cc('A : (Unit -> Unit) -> U0,\na : Pi f:(Unit -> Unit). A (\\x : Unit. f x)', 'a', 'Pi f:(Unit -> Unit).A f')"> 
					Eta-equivalence 
				</td>
				<td class="example" onclick="load_cc('', 'let pair =\n \\A:U0.\\B:(A -> U0).\\x:A.\\y:(B x).\n \\K:U0.\\k:(Pi x:A.(B x) -> K).k x y\nin\n pair', 'let Sigma =\n \\A:U0.\\B:(A -> U0). Pi K:U0.(Pi x:A.(B x) -> K) -> K\nin\n Pi A:U0. Pi B:(A -> U0). Pi x:A. Pi y:(B x).\n (Sigma A B)')"> 
					Dependent pair 
				</td>
			</tr>
		</table>

	</body>
</html>
